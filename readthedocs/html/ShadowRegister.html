

<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="generator" content="HelpNDoc Personal Edition 9.0.0.156">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="favicon.ico"/>

  <title>Shadow Register</title>
  <meta name="description" content="Complete documentation of IDesignSpec suite of products" /> 
  <meta name="keywords" content="Advanced Topics,Special Register">



  
  

  <!-- Twitter Card data -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Shadow Register">
  <meta name="twitter:description" content="Complete documentation of IDesignSpec suite of products">

  <!-- Open Graph data -->
  <meta property="og:title" content="Shadow Register" />
  <meta property="og:type" content="article" />
  <meta property="og:description" content="Complete documentation of IDesignSpec suite of products" />
  <meta property="og:site_name" content="IDesignSpec&trade;" /> 

  <!-- Bootstrap core CSS -->
  <link href="vendors/bootstrap-3.4.1/css/bootstrap.min.css" rel="stylesheet"/>

  <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
  <link href="vendors/bootstrap-3.4.1/css/ie10-viewport-bug-workaround.css" rel="stylesheet"/>

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
      <script src="vendors/html5shiv-3.7.3/html5shiv.min.js"></script>
      <script src="vendors/respond-1.4.2/respond.min.js"></script>
    <![endif]-->

  <!-- JsTree styles -->
  <link href="vendors/jstree-3.3.10/themes/default/style.min.css" rel="stylesheet"/>

  <!-- Hnd styles -->
  <link href="css/layout.min.css" rel="stylesheet" />
  <link href="css/effects.min.css" rel="stylesheet" />
  <link href="css/theme-light-blue.min.css" rel="stylesheet" />
  <link href="css/print.min.css" rel="stylesheet" media="print" />
  <style type="text/css">nav { width: 350px} @media screen and (min-width:769px) { body.md-nav-expanded div#main { margin-left: 350px} body.md-nav-expanded header { padding-left: 364px} }</style>
  <style type="text/css">.navigation #inline-toc { width: auto !important}</style>

  <!-- Content style -->
  <link href="css/hnd.content.css" rel="stylesheet" />

  



</head>

<body class="md-nav-expanded">



  

  <div id="skip-link">
    <a href="#main-content" class="element-invisible">Skip to main content</a>
  </div>

  <header class="headroom">
    <button class="hnd-toggle btn btn-default">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>        
    </button>
    <h1>IDesignSpec&trade;</h1>
    
  </header>

  <nav id="panel-left" class="md-nav-expanded">
    <!-- Nav tabs -->
    <ul class="tab-tabs nav nav-tabs" role="tablist">
      <li id="nav-close" role="presentation"> 
        <button class="hnd-toggle btn btn-default" aria-label="close">
          <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
        </button>
      </li>
      
	  
        <li role="presentation" class="tab active">
            <a href="#contents" id="tab-contents" aria-controls="contents" role="tab" data-toggle="tab">
                <i class="glyphicon glyphicon-list"></i>
                Contents
            </a>
        </li>
      
        <li role="presentation" class="tab">
            <a href="#index" id="tab-index" aria-controls="index" role="tab" data-toggle="tab">
                <i class="glyphicon glyphicon-asterisk"></i>
                Index
            </a>
        </li>
      
        <li role="presentation" class="tab">
            <a href="#search" id="tab-search" aria-controls="search" role="tab" data-toggle="tab">
                <i class="glyphicon glyphicon-search"></i>
                Search
            </a>
        </li>
      
    </ul>  <!-- /Nav tabs -->

    <!-- Tab panes -->
    <div class="tab-content">
	  
      <div role="tabpanel" class="tab-pane active" id="contents">
        <div id="toc" class="tree-container unselectable"
            data-url="_toc.json"
            data-openlvl="1"
        >
            
        </div>
      </div>  <!-- /contents-->
      
      <div role="tabpanel" class="tab-pane" id="index">
        <div id="keywords" class="tree-container unselectable"
            data-url="_keywords.json"
            data-openlvl="1"
        >
            
        </div>
      </div>  <!-- /index-->
      
      <div role="tabpanel" class="tab-pane" id="search">
        <div class="search-content">
          <div class="search-input">
            <form id="search-form">
              <div class="form-group">
                <div class="input-group">
                  <input type="text" class="form-control" id="input-search" name="input-search" placeholder="Search..." aria-label="Search..." />
                  <span class="input-group-btn">
                    <button class="btn btn-default" type="submit" aria-label="Search...">
                      <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
                    </button>
                  </span>
                </div>
              </div>
            </form>
          </div>  <!-- /search-input -->
          <div class="search-result">
            <div id="search-info"></div>
            <div class="tree-container unselectable" id="search-tree"></div>
          </div>  <!-- /search-result -->
        </div>  <!-- /search-content -->
      </div>  <!-- /search-->
      
    </div>  <!-- /Tab panes -->

  </nav>

  <div id="main">

    <article>
        <div id="topic-content" class="container-fluid" 
		  data-hnd-id="ShadowRegister"
		  data-hnd-context="214"
		  data-hnd-title="Shadow Register"
		>
            
                <div class="navigation">
                    <ol class="breadcrumb">
                        <li><a href="AdvancedTopics.html">Advanced Topics</a></li><li><a href="SpecialQuirkyRegisters.html">Special / Quirky Registers</a></li>
                    </ol>
                    <div class="nav-arrows">
                        <div class="btn-group btn-group" role="group"><a class="btn btn-default" href="SpecialQuirkyRegisters.html" title="Special / Quirky Registers" role="button"><span class="glyphicon glyphicon-menu-up" aria-hidden="true"></span></a><a class="btn btn-default" href="PagedBlock.html" title="Paged Block" role="button"><span class="glyphicon glyphicon-menu-left" aria-hidden="true"></span></a><a class="btn btn-default" href="Read-WritepairRegister.html" title="Read-Write pair Register" role="button"><span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span></a></div>
                    </div>
                </div> 
            

            <a id="main-content"></a>

            <h2>Shadow Register</h2>

            <div class="main-content">
                
<p class="rvps12"><span class="rvts14">Designers may sometimes require that the data written to a register through the register bus (SW access) shall be copied or shadowed to another register in the address map automatically. It is often done so that debugging of the designs can be done easily. A common use case is, checking what was written on write-only registers after reading their corresponding shadow registers.Another application is, i</span><span class="rvts205">f a read-modify-write(RMW) operation needs to be performed on a PORT register, then create shadow of the PORT register and perform the RMW on the shadow.</span></p>
<p class="rvps12"><span class="rvts6"><br/></span></p>
<h3 class="rvps105"><span class="rvts0"><span class="rvts897">Logical view</span></span></h3>
<p class="rvps2"><span class="rvts6"><br/></span></p>
<p class="rvps3"><img alt="" style="padding : 1px;" src="lib/NewItem3728.png"></p>
<p class="rvps12"><span class="rvts6"><br/></span></p>
<p class="rvps12"><span class="rvts14">In the above diagram the “ShadowedReg” is a shadow register of “OriginalReg”. Write valid signal of ShadowedReg is OR-ed with the write valid signal of OriginalReg, hence whenever there is write to OriginalReg from bus interface, there is a write to the ShadowedReg too.</span></p>
<p class="rvps11"><span class="rvts14"><br/></span></p>
<p class="rvps12"><span class="rvts14">Following rules apply-</span></p>
<p class="rvps12"><span class="rvts14"><br/></span></p>
<ol style="text-indent: 0px; padding: 0; margin: 0 0 0 72px; list-style-position: outside;">
 <li style="text-indent: 0px" class="rvps115 noindent"><span class="rvts186">Data written to an original register gets written to shadow register too.</span></li>
 <li style="text-indent: 0px" class="rvps115 noindent"><span class="rvts186">Read and write to shadow register have no effect on original register.</span></li>
 <li style="text-indent: 0px" class="rvps115 noindent"><span class="rvts186">Shadow registers can have different access than original register.</span></li>
</ol>
<p class="rvps2"><span class="rvts15"><br/></span></p>
<h3 class="rvps105"><span class="rvts0"><span class="rvts897">Template and property</span></span></h3>
<p class="rvps12"><span class="rvts14">&nbsp;</span></p>
<p class="rvps2"><span class="rvts611">How to declare a shadow register</span><span class="rvts14">- Shadow registers can be declared by specifying a property “shadow_address” which is the value of the absolute address of the original register or &nbsp;“shadow_reg” which is the name of the original register. (See example below)</span></p>
<p class="rvps2"><span class="rvts14"><br/></span></p>
<p class="rvps2"><span class="rvts15">Shadow Register Example:</span><span class="rvts15"> &nbsp; &nbsp; &nbsp; &nbsp;</span><a class="rvts302" href="https://www.portal.agnisys.com/release/idsdocs/examples/properties/shadow_reg/shadow_reg.zip">IDS-NG</a><span class="rvts15"> &nbsp; &nbsp; &nbsp; &nbsp;</span><a class="rvts302" href="https://www.portal.agnisys.com/release/idsdocs/examples/properties/shadow_reg/shadow_reg.docx">IDS-Word</a><span class="rvts15"> &nbsp; &nbsp; &nbsp; &nbsp;</span><a class="rvts302" href="https://www.portal.agnisys.com/release/idsdocs/examples/properties/shadow_reg/shadow_reg.xlsx">IDS-Excel</a><span class="rvts15"> &nbsp; &nbsp; &nbsp; &nbsp;</span><a class="rvts302" href="https://www.portal.agnisys.com/release/idsdocs/examples/properties/shadow_reg/shadow_reg.rdl">SystemRDL</a></p>
<p class="rvps2"><span class="rvts15">Shadow Address Example:</span><span class="rvts15"> &nbsp; &nbsp; &nbsp; &nbsp;</span><a class="rvts302" href="https://www.portal.agnisys.com/release/idsdocs/examples/properties/shadow_address/shadow_address.zip">IDS-NG</a><span class="rvts15"> &nbsp; &nbsp; &nbsp; &nbsp;</span><a class="rvts302" href="https://www.portal.agnisys.com/release/idsdocs/examples/properties/shadow_address/shadow_address.docx">IDS-Word</a><span class="rvts15"> &nbsp; &nbsp; &nbsp; &nbsp;</span><a class="rvts302" href="https://www.portal.agnisys.com/release/idsdocs/examples/properties/shadow_address/shadow_address.xlsx">IDS-Excel</a><span class="rvts15"> &nbsp; &nbsp; &nbsp; &nbsp;</span><a class="rvts302" href="https://www.portal.agnisys.com/release/idsdocs/examples/properties/shadow_address/shadow_address.rdl">SystemRDL</a></p>
<h2 class="rvps111"><span class="rvts0"><span class="rvts427">IDS-NG Register View</span></span></h2>
<p class="rvps2"><span class="rvts14"><br/></span></p>
<p class="rvps3"><img alt="" style="padding : 1px;" src="lib/NewItem5260.png"></p>
<p class="rvps3"><span class="rvts14"><br/></span></p>
<p class="rvps3"><img alt="" style="padding : 1px;" src="lib/NewItem5259.png"></p>
<p class="rvps3"><span class="rvts14"><br/></span></p>
<h2 class="rvps111"><span class="rvts0"><span class="rvts427">IDS-NG Spreadsheet View</span></span></h2>
<p class="rvps2"><span class="rvts14"><br/></span></p>
<p class="rvps3"><img alt="" style="padding : 1px;" src="lib/NewItem5261.png"></p>
<p class="rvps3"><img alt="" style="padding : 1px;" src="lib/NewItem5263.png"></p>
<p class="rvps3"><span class="rvts14"><br/></span></p>
<p class="rvps3"><span class="rvts162"><br/></span></p>
<h2 class="rvps111"><span class="rvts0"><span class="rvts427">SystemRDL</span></span></h2>
<p class="rvps2"><span class="rvts14"><br/></span></p>
<div class="rvps2">
<table width="100%" cellpadding="10" style="border-width: 0px; border-spacing: 2px;">
 <tr style="vertical-align: top;">
  <td style="border-width : 1px; border-color: canvastext; border-style: solid; padding: 10px;">
   <p class="rvps2"><span class="rvts356">property shadow_address{type = number ;component = reg;};</span></p>
   <p class="rvps2"><span class="rvts356"><br/></span></p>
   <p class="rvps2"><span class="rvts356">addrmap block_name1{</span></p>
   <p class="rvps2"><span class="rvts356"><br/></span></p>
   <p class="rvps2"><span class="rvts356"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="rvts356">reg {</span></p>
   <p class="rvps2"><span class="rvts356"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="rvts356">&nbsp;</span></p>
   <p class="rvps2"><span class="rvts356"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="rvts356"> &nbsp;field {</span></p>
   <p class="rvps2"><span class="rvts356"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="rvts356"> &nbsp; &nbsp;hw = rw;</span></p>
   <p class="rvps2"><span class="rvts356"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="rvts356"> &nbsp; &nbsp;sw = rw;</span></p>
   <p class="rvps2"><span class="rvts356"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="rvts356"> &nbsp;}Fld[31:0]=32'h0;</span></p>
   <p class="rvps2"><span class="rvts356"> &nbsp; &nbsp; &nbsp; &nbsp;</span></p>
   <p class="rvps2"><span class="rvts356"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="rvts356">}originalReg;</span></p>
   <p class="rvps2"><span class="rvts356">&nbsp; &nbsp; &nbsp;&nbsp;</span></p>
   <p class="rvps2"><span class="rvts356">&nbsp; &nbsp; reg {</span></p>
   <p class="rvps2"><span class="rvts356">&nbsp; &nbsp; &nbsp; shadow_address = 0x0;</span></p>
   <p class="rvps2"><span class="rvts356">&nbsp; &nbsp; &nbsp; field{</span><span class="rvts356"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="rvts356"> &nbsp; &nbsp; &nbsp;</span></p>
   <p class="rvps2"><span class="rvts356">&nbsp; &nbsp; &nbsp; &nbsp; hw = na;</span></p>
   <p class="rvps2"><span class="rvts356"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="rvts356"> &nbsp; &nbsp;sw = r;</span></p>
   <p class="rvps2"><span class="rvts356">&nbsp; &nbsp; &nbsp; &nbsp;}Fld[31:0]=32'h0;</span></p>
   <p class="rvps2"><span class="rvts356"><br/></span></p>
   <p class="rvps2"><span class="rvts356">&nbsp; &nbsp; }shadowReg;</span></p>
   <p class="rvps2"><span class="rvts356"><br/></span></p>
   <p class="rvps2"><span class="rvts356">&nbsp; };</span></p>
  </td>
 </tr>
</table>
</div>
<p class="rvps2"><span class="rvts356"><br/></span></p>
<p class="rvps2"><span class="rvts14">In the example above, shadow register at address 0x4 shadows the original register at address 0x0.</span></p>
<p class="rvps2"><span class="rvts14">The following code is generated</span></p>
<p class="rvps2"><span class="rvts6"><br/></span></p>
<h3 class="rvps105"><span class="rvts0"><span class="rvts897">Verilog output</span></span></h3>
<p class="rvps2"><span class="rvts202"><br/></span></p>
<div class="rvps2">
<table width="100%" cellpadding="10" style="border-width: 0px; border-spacing: 2px;">
 <tr style="vertical-align: top;">
  <td style="border-width : 1px; border-color: canvastext; border-style: solid; padding: 10px;">
   <p class="rvps2"><span class="rvts1093"><br/></span></p>
   <p class="rvps2"><span class="rvts1129">&nbsp; &nbsp; </span><span class="rvts1130">assign shadowreg_wr_valid = (shadowreg_decode || ((address &nbsp; &nbsp;[block_name_address_width-1 : 0] === 'h0) ? 1'b1 : 1'b0)) &amp;&amp; wr_stb;</span></p>
   <p class="rvps2"><span class="rvts445">&nbsp; &nbsp; assign shadowreg_enb = shadowreg_wr_valid;</span></p>
   <p class="rvps2"><span class="rvts445">&nbsp; &nbsp; assign shadowreg_offset = block_offset+'h4;</span></p>
   <p class="rvps2"><span class="rvts445">&nbsp; &nbsp; assign shadowreg_decode = (address[block_name_address_width-1 : 0] ===shadowreg_offset) ? 1'b1 : 1'b0;</span></p>
   <p class="rvps2"><span class="rvts445"><br/></span></p>
   <p class="rvps2"><span class="rvts445">&nbsp; &nbsp; always @(posedge clk)&nbsp;</span></p>
   <p class="rvps2"><span class="rvts445">&nbsp; &nbsp; &nbsp; begin&nbsp;</span></p>
   <p class="rvps2"><span class="rvts445">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if (!reset_l)&nbsp;</span></p>
   <p class="rvps2"><span class="rvts445">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;begin&nbsp;</span></p>
   <p class="rvps2"><span class="rvts445">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shadowreg_shadowfield_q &lt;= 32'b00000000000000000000000000000000;&nbsp;</span></p>
   <p class="rvps2"><span class="rvts445">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end&nbsp;</span></p>
   <p class="rvps2"><span class="rvts445">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;...&nbsp;</span></p>
   <p class="rvps2"><span class="rvts451">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;...&nbsp;</span></p>
   <p class="rvps2"><span class="rvts445">&nbsp; &nbsp;&nbsp;</span></p>
   <p class="rvps2"><span class="rvts445">&nbsp; &nbsp; assign shadowreg_shadowfield_r = shadowreg_shadowfield_q;</span></p>
   <p class="rvps2"><span class="rvts445">&nbsp; &nbsp; assign shadowreg_rd_data = shadowreg_decode ? {shadowreg_shadowfield_q} : 32'b00000000000000000000000000000000;</span></p>
   <p class="rvps2"><span class="rvts445"><br/></span></p>
  </td>
 </tr>
</table>
</div>
<p></p>
<p class="rvps5" style="clear: both;"><span class="rvts12">Created with the Personal Edition of HelpNDoc: </span><a class="rvts13" href="https://www.helpndoc.com/step-by-step-guides/how-to-convert-a-word-docx-file-to-an-epub-or-kindle-ebook/">Transform Your Word Document into a Professional eBook with HelpNDoc</a></p>

            </div>
            
            <div id="topic_footer"><div id="topic_footer_content">&copy; 2007 - 2023 Agnisys&reg; Inc. All Rights Reserved.                                         https://www.agnisys.com/submit-feedback/                 </div></div>
        </div>  <!-- /#topic-content -->
    </article>

    <footer></footer>

  </div>  <!-- /#main -->

  <div class="mask" data-toggle="sm-nav-expanded"></div>
  
  <!-- Modal -->
  <div class="modal fade" id="hndModal" tabindex="-1" role="dialog" aria-labelledby="hndModalLabel">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title" id="hndModalLabel"></h4>
        </div>
        <div class="modal-body">
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary modal-btn-close" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Splitter -->
  <div id="hnd-splitter" style="left: 350px"></div>  

  <!-- Scripts -->
  <script src="vendors/jquery-3.5.1/jquery.min.js"></script>
  <script src="vendors/bootstrap-3.4.1/js/bootstrap.min.js"></script>
  <script src="vendors/bootstrap-3.4.1/js/ie10-viewport-bug-workaround.js"></script>
  <script src="vendors/markjs-8.11.1/jquery.mark.min.js"></script>
  <script src="vendors/uri-1.19.11/uri.min.js"></script>
  <script src="vendors/imageMapResizer-1.0.10/imageMapResizer.min.js"></script>
  <script src="vendors/headroom-0.11.0/headroom.min.js"></script>
  <script src="vendors/jstree-3.3.10/jstree.min.js"></script>  
  <script src="vendors/interactjs-1.9.22/interact.min.js"></script>  

  <!-- HelpNDoc scripts -->
  <script src="js/polyfill.object.min.js"></script>
  <script src="_translations.js"></script>
  <script src="js/hndsd.min.js"></script>
  <script src="js/hndse.min.js"></script>
  <script src="js/app.min.js"></script>

  <!-- Init script -->
  <script>
    $(function() {
      // Create the app
      var app = new Hnd.App({
        searchEngineMinChars: 3
      });
      // Update translations
      hnd_ut(app);
	  // Instanciate imageMapResizer
	  imageMapResize();
	  // Custom JS
	  
      // Boot the app
      app.Boot();
    });
  </script>



</body>

</html>

